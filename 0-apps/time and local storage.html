<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Template</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Quicksand", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        height: 100vh;
        color: black;
      }

      #time {
        font-size: 8rem;
      }

      h1 {
        margin-bottom: 3rem;
      }

      h2 {
        margin-bottom: 0.5rem;
        opacity: 0.6;
      }

      @media (max-width: 700px) {
        #time {
          font-size: 6rem;
        }
      }
    </style>
    <!--[if lt IE 9]>
      <script
        src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"
        defer
      ></script>
      <script
        src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"
        defer
      ></script>
    <![endif]-->
  </head>
  <body>
    <time id="time"></time>
    <h1>
      <span id="greeting"></span>
      <span id="name" contenteditable="true"></span>
    </h1>
    <h2>What Is Your Focus For Today?</h2>
    <h2 id="focus" contenteditable="true"></h2>

    <script>
      // DOM Elements
      const time = document.getElementById("time"),
        greeting = document.getElementById("greeting"),
        name = document.getElementById("name"),
        focus = document.getElementById("focus");

      // Options
      const showAmPm = true;

      // Show Time
      function showTime() {
        let today = new Date(),
          hour = today.getHours(),
          min = today.getMinutes(),
          sec = today.getSeconds();

        // Set AM or PM
        const amPm = hour >= 12 ? "PM" : "AM";

        // 12hr Format
        hour = hour % 12 || 12;

        // Output Time
        time.innerHTML = `${hour}<span>:</span>${addZero(
          min,
        )}<span>:</span>${addZero(sec)} ${showAmPm ? amPm : ""}`;

        setTimeout(showTime, 1000);
      }

      // Add Zeros
      function addZero(n) {
        return (parseInt(n, 10) < 10 ? "0" : "") + n;
      }

      // Set Background and Greeting
      function setBgGreet() {
        let today = new Date(),
          hour = today.getHours();

        if (hour < 12) {
          // Morning
          document.body.style.backgroundImage =
            "url('https://i.ibb.co/7vDLJFb/morning.jpg')";
          greeting.textContent = "Good Morning, ";
        } else if (hour < 18) {
          // Afternoon
          document.body.style.backgroundImage =
            "url('https://i.ibb.co/3mThcXc/afternoon.jpg')";
          greeting.textContent = "Good Afternoon, ";
        } else {
          // Evening
          document.body.style.backgroundImage =
            "url('https://i.ibb.co/924T2Wv/night.jpg')";
          greeting.textContent = "Good Evening, ";
          document.body.style.color = "white";
        }
      }

      // Get Name
      function getName() {
        if (localStorage.getItem("name") === null) {
          name.textContent = "[Enter Name]";
        } else {
          name.textContent = localStorage.getItem("name");
        }
      }

      // Set Name
      function setName(e) {
        if (e.type === "keypress") {
          // Make sure enter is pressed
          if (e.which == 13 || e.keyCode == 13) {
            localStorage.setItem("name", e.target.innerText);
            name.blur();
          }
        } else {
          localStorage.setItem("name", e.target.innerText);
        }
      }

      // Get Focus
      function getFocus() {
        if (localStorage.getItem("focus") === null) {
          focus.textContent = "[Enter Focus]";
        } else {
          focus.textContent = localStorage.getItem("focus");
        }
      }

      // Set Focus
      function setFocus(e) {
        if (e.type === "keypress") {
          // Make sure enter is pressed
          if (e.which == 13 || e.keyCode == 13) {
            localStorage.setItem("focus", e.target.innerText);
            focus.blur();
          }
        } else {
          localStorage.setItem("focus", e.target.innerText);
        }
      }

      name.addEventListener("keypress", setName);
      name.addEventListener("blur", setName);
      focus.addEventListener("keypress", setFocus);
      focus.addEventListener("blur", setFocus);

      // Run
      showTime();
      setBgGreet();
      getName();
      getFocus();
    </script>
  </body>
</html>
